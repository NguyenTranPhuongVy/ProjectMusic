@using ProjectMusicSound.Models
@model ProjectMusicSound.Models.Music

@{
    ViewBag.Title = "Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
    MusicDataEntities db = new MusicDataEntities();
    List<Music_Singer> singers = db.Music_Singer.ToList();
    List<Music> musics = db.Musics.ToList();
    List<Music_Category> music_Categories = db.Music_Category.ToList();
}
<style>
    .Font{
        font-size: 26px;
        margin: 0em 0em 0em;
    }
    .Chinh{
        margin-top: 3%;
        margin-bottom: 5%;
    }
</style>
@Html.Action("Menu", "View")
@*<div class="row">
    <div class="col-lg-4">
        <div class="row">
            <div class="col-lg-4">
                <img class="ui small circular image" src="~/Images/@Model.music_img">
            </div>
            <div class="col-lg-4">
                <p>@Model.music_name</p>
                @if (Model.User.role_id == 1)
                {
                    <p>@Model.User.user_name</p>
                }
                else
                {
                    foreach (var item in singers.Where(n => n.music_id == Model.music_id))
                    {
                        <p>@item.Singer.singer_name</p>
                    }
                }
            </div>
            <div class="col-lg-4">
                <i class="far fa-heart"></i>
                <i class="fas fa-ellipsis-h"></i>
            </div>
        </div>
    </div>
    <div class="col-lg-4">
        <audio controls>
            <source src="/Content/LinkMusic/@Model.music_linkdow">
        </audio>
    </div>
    <div class="col-lg-4"></div>
</div>*@
<div class="Chinh">
    <div class="row container-fluid">
        <div class="col-lg-8">
            <div class="ui segment">
                <div>
                    <center><img class="ui medium circular image" src="~/Images/@Model.music_img"></center>
                </div>
                <p class="Font">@Model.music_name</p>
                @if(Model.User.role_id == 1)
                {
                    <p>@Model.User.user_name</p>
                }
                else
                {
                    foreach(var item in singers.Where(n => n.music_id == Model.music_id))
                    {
                        <p>@item.Singer.singer_name</p>
                    }
                }
                <audio controls>
                    <source src="/Content/LinkMusic/@Model.music_linkdow" type="audio/mpeg">
                </audio>
            </div>
            <div class="ui styled accordion w-100">
                <div class="active title">
                    <i class="dropdown icon"></i>
                    Lời Bài Hát
                </div>
                <div class="active content">
                    <p>@Model.music_lyric</p>
                </div>
                <div class="title">
                    <i class="dropdown icon"></i>
                    Bình Luận
                </div>
                <div class="content">
                    <p>There are many breeds of dogs. Each breed varies in size and temperament. Owners often select a breed of dog that they find to be compatible with their own lifestyle and desires from a companion.</p>
                </div>
                <div class="title">
                    <i class="dropdown icon"></i>
                    Đánh Giá
                </div>
                <div class="content">
                    <p>Three common ways for a prospective owner to acquire a dog is from pet shops, private owners, or shelters.</p>
                    <p>A pet shop may be the most convenient way to buy a dog. Buying a dog from a private owner allows you to assess the pedigree and upbringing of your dog before choosing to take it home. Lastly, finding your dog from a shelter, helps give a good home to a dog who may not find one so readily.</p>
                </div>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="ui tabular menu">
                <div class="active item" data-tab="tab-name">Danh Sách Phát</div>
                <div class="item" data-tab="tab-name2">Gợi Ý Cho Bạn</div>
            </div>
            <div class="ui segment">
                <div class="ui tab active" data-tab="tab-name">
                    @foreach (var item in musics.Where(n => n.user_id == Model.user_id && n.User.role_id == 1 && n.music_active == true && n.music_option == true && n.music_bin == false && n.music_id != Model.music_id).OrderByDescending(n => n.music_datecreate).Take(15))
                    {
                        <div class="ui items">
                            <div class="item">
                                <div class="image" style="width: 85px">
                                    <img class="ui small rounded image" style="width: 80px; height: 80px" src="~/Images/@item.music_img">
                                </div>
                                <div class="content">
                                    <a href="@Url.Action("Details", "Musics", new { id = item.music_id })" class="header">@item.music_name</a>
                                    <div class="meta">
                                        @if (item.User.role_id == 1)
                                        {
                                            <span>Trình Bày: @item.User.user_name</span>
                                        }
                                        else
                                        {
                                            foreach (var items in singers.Where(n => n.music_id == item.music_id))
                                            {
                                                <span>Trình Bày: @items.Singer.singer_name</span>
                                            }
                                        }
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                </div>
                <div class="ui tab" data-tab="tab-name2">
                    
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    $('.ui.accordion')
        .accordion()
        ;
</script>
<script>
    $('.tabular.menu .item').tab();
</script>
